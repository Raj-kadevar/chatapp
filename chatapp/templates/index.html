{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Chat Room</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap5-toggle@5.0.4/css/bootstrap5-toggle.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap5-toggle@5.0.4/js/bootstrap5-toggle.ecmas.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
          integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
</head>
<body>
<section class="gradient-custom">
    <div class="container py-5 switch">
        <div>
            <audio id="audio" src="http://127.0.0.1:8000/media/{{request.user.tune}}"></audio>
            <label for="membership">Change message tune:</label>
            <select name="membership" id="audios">
                <option value="achive-sound.mp3">achive-sound.mp3</option>
                <option value="friend-request.mp3">friend-request.mp3</option>
                <option value="beep.mp3" >beep.mp3</option>
                <option value="sound3.mp3">sound3.mp3</option>
            </select>
        </div>
            <h3>{{request.user}}</h3>
            {% if request.user.status == True %}
            <input type="checkbox" checked data-toggle="toggle" data-onlabel="Online" data-offlabel="offline"
                   data-onstyle="success" data-offstyle="dark" id="status">
            {% else %}
            <input type="checkbox" data-toggle="toggle" data-onlabel="Online" data-offlabel="offline"
                   data-onstyle="success" data-offstyle="dark" id="status">
            {% endif %}
            <div class="row">
                <div class="col-md-6 col-lg-5 col-xl-5 mb-4 mb-md-0">
                    <div class="card mask-custom">
                        <div class="card-body">
                            <ul class="list-unstyled chat mb-0 overflow-scroll users">
                                {% for user in users %}
                                <li class="p-2 border-bottom"
                                    style="border-bottom: 1px solid rgba(255,255,255,.3) !important;">

                                    <a href="#" class="d-flex justify-content-between link-light"
                                       onclick="user({{user.id}})">
                                        <div class="d-flex flex-row">
                                            <div id="{{user.id}}" class="status">
                                                {% if user.status == True %}
                                                <i class='fas fa-smile' style='font-size:28px;color:green'></i>
                                                {% else %}
                                                <i class='far fa-frown' style='font-size:28px;'></i>
                                                {% endif %}
                                            </div>
                                            <img src="{{user.profile.url}}" alt="avatar"
                                                 class="rounded-circle d-flex align-self-center me-3 shadow-1-strong"
                                                 height="60" width="60">
                                            <div class="pt-1">
                                                <p class="fw-bold mb-0">{{user.username}}</p>
                                            </div>
                                        </div>
                                    </a>
                                </li>
                                {% endfor %}
                            </ul>

                        </div>
                    </div>
                </div>
                <span hidden id="user">{{request.user.id}}</span>
                <div class="col-md-6 col-lg-7 col-xl-7 ">
                    <ul class="list-unstyled text-white chat overflow-scroll chat-list">

                    </ul>
                </div>
                <div class="form-outline form-white"></br>
                    <input hidden type="file" name="file" id="file">
                    <div class="row message">
                        <textarea class="form-control col-md-4 previewDiv" id="txtArea"></textarea>&nbsp;
                        <button type="button" onclick="submit(this)"
                                class="btn btn-light btn-lg btn-rounded send float-end col-md-2 chat-message-submit">
                            <i class="fa fa-paper-plane" aria-hidden="true"></i></button>
                        <div class="preview">
                        </div>
                    </div>
                </div>
                <div id="media">

                </div>
            </div>
</section>
<script src="{% static 'js/ajax_request.js' %}"></script>
<script type="text/javascript" src="{% static 'js/script.js' %}"></script>
</body>

</html>